{% extends 'scipost/base.html' %}

{% load render_bundle from webpack_loader %}
{% load static %}


{% block headsup %}
  {{ block.super }}
  <style>
   .sp-swap.htmx-added {
       opacity: 0;
   }
   .sp-swap.htmx-swapping {
       opacity: 0;
   }
   .sp-swap {
       opacity: 1;
       transition: opacity 1s;
   }
  </style>
{% endblock %}

{% block body_class %}{{ block.super }} homepage{% endblock %}

{% block meta_description %}{{ block.super }} homepage{% endblock meta_description %}
{% block pagetitle %}Homepage{% endblock pagetitle %}

{% block content %}

  <div class="row gx-4">
    <div class="col-md-4">
      <h2 class="highlight text-center mt-0">Portals</h2>
      <div class="d-flex justify-content-center">
	<div class="btn-group-vertical w-100" role="group">
	  {% for branch in branches %}
	    {% if branch.name != 'Multidisciplinary' and branch.journals.all|length > 0 %}
	      {% for acad_field in branch.academic_fields.all %}
		{% if acad_field.journals.active.all|length > 0 %}
		  <a type="button" class="btn-primary w-100 m-1 p-2 text-center" href={% url 'scipost:portal' %}?field={{ acad_field.slug }}><strong>{{ acad_field.name }}</strong></a>
		{% endif %}
	      {% endfor %}
	    {% endif %}
	  {% endfor %}
	</div>
      </div>
    </div>

    <div class="col-md-8">
      <div class="card">
	<div class="card-header">
	  <h1>Genuinely Open Publishing</h1>
	</div>
	<div class="card-body">
	  <p>SciPost is a complete publishing infrastructure serving professional scientists worldwide.</p>
	  <div class="row g-2">
	    <div class="col-lg-6">
	      <div class="card">
		<div class="card-header">
		  <h3>We implement<br><a href="{% url 'scipost:about' %}#GOA">Genuine Open Access</a></h3>
		</div>
		<div class="card-body">
		  <ul>
		    <li>Community Ownership</li>
		    <li>Open Infrastructure</li>
		    <li>Copyright to Authors</li>
		    <li>Open Access</li>
		    <li>Open Citations</li>
		    <li>Fee Free</li>
		    <li>Non Profit</li>
		    <li>Open Finances</li>
		    <li>Academic Editing</li>
		  </ul>
		</div>
	      </div>
	    </div>
	    <div class="col-lg-6">
	      <div class="card mb-2">
		<div class="card-header">
		  <h3>Info</h3>
		</div>
		<div class="card-body">
		  <ul>
		    <li><a href="{% url 'scipost:contact' %}">Contact us</a></li>
		    <li><a href="{% url 'scipost:about' %}">About SciPost</a></li>
		    <li><a href="{% url 'scipost:foundation' %}">The Foundation</a></li>
		    <li><a href="{% url 'careers:jobopenings' %}">Careers&#64;SciPost</a></li>
		    <li><a href="{% url 'scipost:FAQ' %}">FAQ</a></li>
		  </ul>
		</div>
	      </div>

	      {% if not user.is_authenticated %}
		<!-- Register -->
		<div class="card border border-danger">
		  <div class="card-header">
		    <h3>Register</h3>
		  </div>
		  <div class="card-body">
		    <p class="mb-1">Professional scientists (PhD students and above) can become Contributors to SciPost by filling the <a href="{% url 'scipost:register' %}">registration form</a>.</p>
		  </div><!-- End Register -->
		</div>
	      {% endif %}
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>

{% endblock %}


{% block content_footer %}

  <div class="container-fluid text-start secondary pt-4 mt-5 border-top border-primary">
    <div class="row">
      <div class="col">
	<h1 class="title">
	  News
	  <button class="btn btn-link btn-sm m-0 mb-1" href="{% url 'scipost:feeds' %}" aria-label="RSS feeds">{% include 'bi/rss-fill.html' %}</button>
	</h1>
      </div>
      <div class="col">
	<a href="{% url 'news:news' %}" class="my-1 float-right">See complete News list</a>
      </div>
    </div>

    <div class="row g-2">
      <div class="col-md-6">
	<div class="card">
	  <div class="card-header">
	    <h3>Latest</h3>
	  </div>
	  <div class="card-body">
            <h3><a href="{% url 'news:news' %}#news_{{ latest_newsitem.id }}">{{ latest_newsitem.headline }}</a></h3>
            <div class="text-muted">{{ latest_newsitem.date|date:'j F Y' }}</div>
            <p>
	      {{ latest_newsitem.blurb_short }}
	      <br>
	      <br>
	      <a href="{% url 'news:news' %}#news_{{ latest_newsitem.id }}" class="my-1">Read more &rarr;</a>
            </p>
	  </div>
	</div>
      </div>

      <div class="col-md-6">
	<div class="card">
	  <div class="card-header">
	    <h3>Further news</h3>
	  </div>
	  <div class="card-body">
	    <div id="further-news" class="sp-swap"
		 hx-get="{% url 'scipost:_hx_news' %}"
		 hx-trigger="load"
		 hx-swap="outerHTML swap:1s"
	    >
	    </div>
	  </div>
	</div>
      </div>
    </div>
  </div>

  <div class="container-fluid text-start secondary pt-4 mt-5 border-top border-primary">
    <div class="row">
      <div class="col-md-8">
	<h1>Sponsors</h1>
	<p>
	  SciPost guarantees free online access to all publications in all its Journals and does not charge any article processing fees for publishing. Sponsors provide operating funds to SciPost through a cost-slashing consortial model.
	</p>
	<p>
	  We invite <a href="{% url 'organizations:organizations' %}">organizations benefitting from SciPost's activities</a> to join our growing <a href="{% url 'sponsors:sponsors' %}">list of Sponsors</a>. Look at our <a href="{% static 'sponsors/SciPost_Sponsors_Board_Prospectus.pdf' %}">one-page Prospectus</a> and at our full <a href="{% static 'sponsors/SciPost_Sponsorship_Agreement.pdf' %}">Sponsorship Agreement template</a>.
	</p>
	<p>
	  <strong>Scientists, please help us out:</strong> Please petition your local librarian/director/... to consider sponsoring us. You can use this email <a href="mailto:?subject=Petition to support SciPost&body={% autoescape on %}{% include 'sponsors/sponsor_petition_email.html' %}{% endautoescape %}&cc=sponsors@{{ request.get_host }}">template</a>.
	</p>
      </div>
      <div class="col-md-4">
	<a href="{% url 'sponsors:sponsors' %}">See all sponsors</a>
	<br>
	<div id="sponsor-logos" class="sp-swap"
	     hx-get="{% url 'scipost:_hx_sponsors' %}"
	     hx-trigger="load"
	     hx-swap="outerHTML swap:1s"
	>
	</div>
      </div>
    </div>

    <hr>

    <div hx-get="{% url 'scipost:_hx_participates_in' %}"
	 hx-trigger="load"
    >
    </div>

  </div>
{% endblock %}
