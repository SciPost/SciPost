{% extends 'scipost/base.html' %}

{% load render_bundle from webpack_loader %}
{% load static %}


{% block headsup %}
  {{ block.super }}
  <style>
   #sponsor-logos.htmx-added {
       opacity: 0;
   }
   #sponsor-logos.htmx-swapping {
       opacity: 0;
   }
   #sponsor-logos {
       opacity: 1;
       transition: opacity 1s;
   }
  </style>
{% endblock %}

{% block body_class %}{{ block.super }} homepage{% endblock %}

{% block meta_description %}{{ block.super }} homepage{% endblock meta_description %}
{% block pagetitle %}Homepage{% endblock pagetitle %}

{% block content %}

  <div class="row">
    <div class="col-md-4">
      <!-- Latest publications -->
      <div class="card card-publications bg-light px-1 mb-2 scipost-bar">
        <div class="card-body pb-0">
          <h2 class="title mb-3">Latest Publications</h2>
          <hr class="sm mb-0 mt-2">
        </div>
	<div hx-get="{% url 'scipost:_index_publications' %}"
	     hx-trigger="load, session-acad-field-set from:body"
	>
	</div>
      </div><!-- End latest publications -->
    </div>

    <div class="col-md-4">
      <!-- Latest submissions -->
      <div class="card card-submissions bg-light px-1 mb-2 scipost-bar">
        <div class="card-body pb-0">
          <h2 class="title mb-3">Latest Submissions</h2>
          <hr class="sm mb-0 mt-2">
        </div>
	<div hx-get="{% url 'scipost:_index_submissions' %}"
	     hx-trigger="load, session-acad-field-set from:body"
	>
	</div>
      </div><!-- End latest submissions -->
    </div>

    <div class="col-md-4">
      {% if not user.is_authenticated %}
	<!-- Register -->
	<div id="register">
	  <h2>Register</h2>
	  <p class="mb-1">Professional scientists (PhD students and above) can become Contributors to SciPost by filling the <a href="{% url 'scipost:register' %}">registration form</a>.</p>
	</div><!-- End Register -->

	<hr class="lg">
      {% endif %}

      <div hx-get="{% url 'scipost:_index_news' %}"
	   hx-trigger="load"
      >
      </div>

    </div>

  </div>
{% endblock %}


{% block content_footer %}
  <div class="container-fluid text-start secondary pt-4 mt-5 border-top border-primary">
    <div class="row">
      <div class="col-md-8">
	<h1>Sponsors</h1>
	<p>
	  SciPost guarantees free online access to all publications in all its Journals and does not charge any article processing fees for publishing. Sponsors provide operating funds to SciPost through a cost-slashing consortial model.
	</p>
	<p>
	  We invite <a href="{% url 'organizations:organizations' %}">organizations benefitting from SciPost's activities</a> to join our growing <a href="{% url 'sponsors:sponsors' %}">list of Sponsors</a>. Look at our <a href="{% static 'sponsors/SciPost_Sponsors_Board_Prospectus.pdf' %}">one-page Prospectus</a> and at our full <a href="{% static 'sponsors/SciPost_Sponsorship_Agreement.pdf' %}">Sponsorship Agreement template</a>.
	</p>
	<p>
	  <strong>Scientists, please help us out:</strong> Please petition your local librarian/director/... to consider sponsoring us. You can use this email <a href="mailto:?subject=Petition to support SciPost&body={% autoescape on %}{% include 'sponsors/sponsor_petition_email.html' %}{% endautoescape %}&cc=sponsors@{{ request.get_host }}">template</a>.
	</p>
      </div>
      <div class="col-md-4">
	<a href="{% url 'sponsors:sponsors' %}">See all sponsors</a>
	<br>
	<div id="sponsor-logos"
	     hx-get="{% url 'scipost:_index_sponsors' %}"
	     hx-trigger="load"
	     hx-swap="outerHTML swap:1s"
	>
	</div>
      </div>
    </div>

    <hr>

    <div hx-get="{% url 'scipost:_index_participates_in' %}"
	 hx-trigger="load"
    >
    </div>

  </div>
{% endblock %}
