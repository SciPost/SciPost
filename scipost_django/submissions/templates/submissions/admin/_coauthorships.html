{% load static %}

{% if coauthorships %}
  {{ coauthorships|length }} (potential) coauthorship{{ coauthorships|length|pluralize }} found:
  <ul class="mt-2 list-unstyled d-flex flex-column gap-1">

    {% for coauthorship in coauthorships %}
      <li id="coauthorship-{{ coauthorship.id }}"
          class="d-flex flex-row flex-grow-1 p-1 gap-2">

        <div class="d-flex flex-column p-0">
          {% include 'preprints/server_icons/'|add:coauthorship.work.server_source|add:'.html' %}
        </div>

        <div class="d-flex flex-column gap-1 flex-grow-1"
             style="min-width: 0">
          <div class="d-flex align-items-center">

            <div class="fw-bold text-truncate flex-grow-1">

              {% if coauthorship.work.url %}
                <a href="{{ coauthorship.work.url }}"
                   title="{{ coauthorship.work.title }}"
                   target="_blank">{{ coauthorship.work.title }}</a>
              {% else %}
                {{ coauthorship.work.title }}
              {% endif %}

            </div>

            {% if coauthorship.work.date_published %}
              <div class="text-muted flex-shrink-0 ms-2">{{ coauthorship.work.date_published|date:"Y-m-d" }}</div>
            {% endif %}

          </div>

          <div>
            between <span class="fw-bold">{{ coauthorship.profile }}</span>
            and <span class="fw-bold">{{ coauthorship.coauthor }}</span>
          </div>

          {% if coauthorship.work.authors_str %}
            <details tabindex="0">
              <summary class="d-flex justify-content-between align-items-center">
                <span class="text-truncate details-preview mb-0">by {{ coauthorship.work.authors_str }}</span>
                <span class="text-muted details-preview">(expand)</span>
              </summary>
              <span class="text-wrap">by {{ coauthorship.work.authors_str }}</span>
            </details>
          {% endif %}

        </div>

        {% if perms.scipost.can_verify_coauthorships %}
          {% include 'submissions/admin/_coauthorship_verification.html' %}
        {% endif %}

      </li>
    {% endfor %}


  </ul>
{% else %}
  <em><span class="text-success"
      aria-hidden="true">{% include 'bi/check-circle-fill.html' %}</span> No coauthorships found</em>
{% endif %}
