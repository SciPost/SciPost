{% load countries %}
{% get_country country as country_obj %}

<h2 class="highlight">Summed over all Organizations in {{ country_obj.name }}&emsp;<i class="{{ country_obj.flag_css }}"></i></h2>

<table class="table">
  <thead>
    <tr>
      <th></th>
      <th style="text-align: right;">Contribution</th>
      <th style="text-align: right;">Expenditures</th>
      <th style="text-align: right;">Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr class="bg-light">
      <td>Cumulative</td>
      <td style="text-align: right;">{{ cumulative.contribution }}</td>
      <td style="text-align: right;">{{ cumulative.expenditures }}</td>
      <td style="text-align: right;">{{ cumulative.balance }}</td>
    </tr>
    {% for year, val in per_year.items %}
      <tr>
	<td>{{ year }}</td>
	<td style="text-align: right;">{{ val.contribution }}</td>
	<td style="text-align: right;">{{ val.expenditures }}</td>
	<td style="text-align: right;">{{ val.balance }}</td>
      </tr>
    {% endfor %}
  </tbody>
</table>


<h2 class="highlight mt-5">Cumulative, per Organization</h2>

<table class="table">
  <thead>
    <tr>
      <th></th>
      <th style="text-align: right;">Contribution</th>
      <th style="text-align: right;">Expenditures</th>
      <th style="text-align: right;">Balance</th>
    </tr>
  </thead>
  <tbody>
    <tr class="bg-light">
      <td>Total</td>
      <td style="text-align: right;">{{ cumulative.contribution }}</td>
      <td style="text-align: right;">{{ cumulative.expenditures }}</td>
      <td style="text-align: right;">{{ cumulative.balance }}</td>
    </tr>
    {% for organization in organizations %}
      {% if organization.cf_balance_info.cumulative.contribution > 0 or organization.cf_balance_info.cumulative.expenditures > 0 %}
	<tr>
	  <td><a href="https://{{ request.get_host }}{{ organization.get_absolute_url }}">{{ organization }}</a></td>
	  <td style="text-align: right;">{{ organization.cf_balance_info.cumulative.contribution }}</td>
	  <td style="text-align: right;">{{ organization.cf_balance_info.cumulative.expenditures }}</td>
	  <td style="text-align: right;">{{ organization.cf_balance_info.cumulative.balance }}</td>
	</tr>
      {% endif %}
    {% endfor %}
  </tbody>
</table>
