{% extends 'scipost/base.html' %}

{% block pagetitle %}: Thesis Link detail{% endblock pagetitle %}

{% block headsup %}

{% load scipost_extras %}

<script>
  $(document).ready(function(){
  $("#commentsbutton").click(function(){
  $("#commentslist").toggle();
  });

    var comment_text_input = $("#id_comment_text");

    function set_comment_text(value) {
      $("#preview-comment_text").text(value)
    }
    set_comment_text(comment_text_input.val())

    comment_text_input.keyup(function(){
      var new_text = $(this).val()
      set_comment_text(new_text)
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    })

  });
</script>

{% endblock headsup %}

{% block content %}

<div class="row">
  <div class="col-12">
      <div class="panel">
          <h1>SciPost Thesis Link</h1>
    </div>
  </div>
</div>

<hr />

<div class="row">
    <div class="col-12">
        {% include "./_thesislink_information.html" with thesislink=thesislink %}
    </div>
</div>

{% include 'scipost/comments_block.html' %}

{% if user.is_authenticated and thesislink.open_for_commenting and perms.scipost.can_submit_comments %}
<hr />

<div class="row">
    <div class="col-12">
        <div class="panel">
            <h2>Contribute a Comment:</h2>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-12">
        <form action="{% url 'theses:thesis' thesislink_id=thesislink.id %}" method="post">
          {% csrf_token %}
          {% load crispy_forms_tags %}
          {% crispy form %}
        </form>
    </div>
    <div class="col-12">
        <h3>Preview of your comment:</h3>
        <p id="preview-comment_text"></p>
    </div>
</div>

{% endif %}

{% endblock content %}
