{% extends 'scipost/base.html' %}

{% block pagetitle %}: Thesis Link detail{% endblock pagetitle %}

{% block headsup %}

{% load scipost_extras %}

<script>
  $(document).ready(function(){
  $("#commentsbutton").click(function(){
  $("#commentslist").toggle();
  });

    var comment_text_input = $("#id_comment_text");

    function set_comment_text(value) {
      $("#preview-comment_text").text(value)
    }
    set_comment_text(comment_text_input.val())

    comment_text_input.keyup(function(){
      var new_text = $(this).val()
      set_comment_text(new_text)
      MathJax.Hub.Queue(["Typeset",MathJax.Hub]);
    })

  });
</script>

{% endblock headsup %}

{% block bodysup %}


<section>
  <div class="flex-greybox">
    <h1>SciPost Thesis Link</h1>
  </div>

  <hr class="hr12">
  <div class="row">
    <div class="col-4">
      <h2>Thesis information: </h2>
    </div>
  </div>
  {{ thesislink.header_as_table }}
  <h3>Abstract:</h3>
  <p>{{ thesislink.abstract }}</p>
  
</section>


{% include 'scipost/comments_block.html' %}


{% if user.is_authenticated and thesislink.open_for_commenting and perms.scipost.can_submit_comments %}
<section>
  <hr class="hr12">
  <div class="flex-greybox">
    <h1>Contribute a Comment:</h1>
  </div>
  <form action="{% url 'theses:thesis' thesislink.id %}" method="post">
    {% csrf_token %}
    {% load crispy_forms_tags %}
    {% crispy form %}
  </form>

  <div class="row">
    <div class="col-10">
      <h3>Preview of your comment:</h3>
      <p id="preview-comment_text"></p>
    </div>
  </div>

</section>
{% endif %}


{% endblock bodysup %}
