{% extends 'scipost/base.html' %}

{% block pagetitle %}: communication{% endblock pagetitle %}

{% block headsup %}

{% load scipost_extras %}

{% endblock headsup %}

{% block bodysup %}

<section>
  {% if errormessage %}
  <p>{{ errormessage }}</p>
  {% else %}
  <div class="flex-greybox">
    <h1>Send a Communication</h1>
  </div>
  {% if comtype == 'EtoA' %}
  <p>to the submitting Author of Submission</p>
  {% elif comtype == 'AtoE' or comtype == 'RtoE' or comtype == 'StoE' %}
  <p>to the Editor-in-charge of Submission</p>
  {% elif comtype == 'EtoR' %}
  <p>to Referee of Submission</p>
  {% elif comtype == 'EtoS' %}
  <p>to SciPost Editorial Administrators</p>
  {% endif %}
  <ul>{{ submission.header_as_li }}</ul>

  <br/>
  {% if referee_id %}
  <form action="{% url 'submissions:communication' submission_id=submission.id comtype=comtype referee_id=referee_id %}" method="post">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Send communication"/>
  </form>
  {% else %}
  <form action="{% url 'submissions:communication' submission_id=submission.id comtype=comtype %}" method="post">
    {% csrf_token %}
    {{ form }}
    <input type="submit" value="Send communication"/>
  </form>
  {% endif %}

  {% endif %}
</section>

{% endblock bodysup %}
