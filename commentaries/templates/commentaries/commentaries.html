{% extends 'scipost/base.html' %}

{% block pagetitle %}: Commentaries{% endblock pagetitle %}

{% block headsup %}
<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-MML-AM_CHTML"></script>
{% endblock headsup %}

{% block bodysup %}

<!-- Temporary strip for online version -->
{% if user.is_authenticated %}

<section>
  <h1>SciPost Commentaries</h1>
  <p>SciPost Commentaries is a repository of Commentary Pages on scientific publications. Each Commentary Page contains summary info about the publication (Title, Author(s), arXiv preprint link, DOI link to published version, abstract), followed by Comments from Contributors and Author and Contributor Replies. </p>
  <h3><a href="{% url 'commentaries:request_commentary' %}">Request opening a new SciPost Commentary Page</a></h3>
</section>

<section>
  <h2>Search SciPost Commentaries:</h2>
  <form action="{% url 'commentaries:commentaries' %}" method="post">
    {% csrf_token %}
    <table>
      {{ form.as_table }}
    </table>
    <input type="submit" name="Submit" />
  </form>

  {% if commentary_search_list %}
  <br />
  <h3>Search results:</h3>
  <ul>
    {% for commentary in commentary_search_list %}
    <li><a href="{% url 'commentaries:commentary' commentary.id %}">{{ commentary.pub_title }}</a> by {{ commentary.author_list }} (published {{ commentary.pub_date }}) </li>
    {% endfor %}
  </ul>
  {% elif form.has_changed %}
  <h3>No match found for your search query.</h3>
  {% endif %}

</section>

{% if commentary_recent_list %}
<section>
  <h2>Recently active Commentaries:</h2>
  <ul>  
    {% for commentary in commentary_recent_list %}
    <li><a href="{% url 'commentaries:commentary' commentary.id %}">{{ commentary.pub_title }}</a> by {{ commentary.author_list }} (published {{ commentary.pub_date }}) </li>
    {% endfor %}
  </ul>
</section>
{% endif %}

<section>
  <h1>SciPost Commentaries how-to</h1>
  <h3>Activation procedure</h3>
  <p>A Commentary Page can be requested by any registererd SciPost Contributor for any scientific paper by filling the <a href="{% url 'commentaries:request_commentary' %}">Commentary request form</a>. After vetting by an Editor, the Commentary Page is activated and made open for Comments from registered SciPost Contributors. Authors can reply to Comments, and Contributors can add Comments to the chain. Authors who are registered SciPost Contributors can opt to receive email notifications of activity on any specific Commentary Page.</p>
  <ul>
    <li><a href="{% url 'commentaries:request_commentary' %}">Request opening a SciPost Commentary Page</a></li>
  </ul>
  <br>
  <h3>Ratings</h3>
  <p>The original publication subject to the Commentary can be rated by Contributors. An aggregate of these ratings is displayed next to the publication's summary info. All Comments and Replies are similarly open to Contributor rating. Ratings in aggregated form are made publicly available.</p>
</section>

{% endif %} <!-- Temporary strip -->

{% endblock bodysup %}
