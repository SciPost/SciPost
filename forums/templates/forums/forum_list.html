{% extends 'forums/base.html' %}

{% load bootstrap %}


{% block breadcrumb_items %}
{{ block.super }}
<span class="breadcrumb-item">Forums</span>
{% endblock %}


{% block pagetitle %}: Forums{% endblock pagetitle %}

{% block content %}

<div class="row">
  <div class="col-12">
    <h3 class="highlight">Forums</h3>
    <ul>
      <li><a href="{% url 'forums:forum_create' %}">Create a new Forum</a></li>
    </ul>
    <table class="table">
      <thead class="thead-default">
	<tr>
	  <th>Forum</th>
	  <th>Latest post</th>
	  <th>Posted on</th>
	  <th>Nr posts</th>
	</tr>
      </thead>
      <tbody>
	{% for forum in object_list %}
	<tr>
	  <td><a href="{{ forum.get_absolute_url }}">{{ forum }}</a></td>
	  <td>{% if forum.posts.all|length > 0 %}{{ forum.posts.first }}{% else %}No posts yet{% endif %}</td>
	  <td>{% if forum.posts.all|length > 0 %}{{ forum.posts.first.posted_on|date:"Y-m-d" }}{% else %}-{% endif %}</td>
	  <td>{{ forum.nr_posts }}</td>
	</tr>
	{% empty %}
	<tr>
	  <td>No Forum defined</td>
	</tr>
	{% endfor %}
      </tbody>
    </table>
  </div>
</div>

{% endblock content %}
