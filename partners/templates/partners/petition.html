{% extends 'scipost/base.html' %}

{% block pagetitle %}: Supporting Partners: Petition{% endblock pagetitle %}

{% load bootstrap %}

{% load staticfiles %}

{% load scipost_extras %}

{% block content %}

<div class="row justify-content-md-center">
    <div class="col-md-10 col-lg-7">
      <h1 class="highlight">{{ petition.headline }}</h1>
      <p>{{ petition.statement|linebreaksbr }}</p>
      {% if request.user.is_authenticated %}
          {% if not is_signed %}
              <h3><a href="{% url 'partners:sign_petition' slug=petition.slug %}">Click here to sign this petition!</a></h3>
          {% else %}
              <h3>Thank you for signing this petition!</h3>
          {% endif %}
      {% else %}
          <h3>You must be logged in to sign this petition</h3>
      {% endif %}
    </div>
</div>

<div class="row">
  <div class="col-12">
    <div class="col-md-10">
      <h2>Signatories</h2>
      <table class="table">
	{% for signatory in petition.signatories.all %}
	<tr>
	  <td>{{ signatory.user.last_name }}</td>
	  <td>{{ signatory.user.first_name }}</td>
	  <td>{{ signatory.affiliation }}</td>
	  <td>{{ signatory.country_of_employment }}</td>
	</tr>
	{% empty %}
	<tr><td>No signatories found</td></tr>
	{% endfor %}
      </table>
    </div>
  </div>
</div>

{% if current_agreements %}
<div class="row">
    <div class="col-12">
        <h1 class="highlight">Partners</h1>
        <ul class="list-unstyled mb-5">
            {% for agreement in current_agreements %}
                <li class="media mb-2">
                    <img class="d-flex mr-3" width="192" src="{% if agreement.partner.institution.logo %}{{agreement.partner.institution.logo.url}}{% endif %}" alt="Partner Logo">
                    <div class="media-body">
                        <p>
                            <strong>{{agreement.partner.institution.name}}</strong><br>
                            {{agreement.partner.institution.get_country_display}}
                        </p>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>
</div>
{% endif %}


{% endblock content %}
