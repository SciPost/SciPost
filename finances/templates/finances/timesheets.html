{% extends 'scipost/base.html' %}

{% block breadcrumb_items %}
    <span class="breadcrumb-item">Team Timesheets</span>
{% endblock %}

{% block pagetitle %}: Team Timesheets{% endblock pagetitle %}

{% load bootstrap %}
{% load scipost_extras %}

{% block content %}

<div class="row">
    <div class="col-12">
        <h1 class="highlight">Team Timesheets</h1>

        <form method="get" action="{% url 'finances:timesheets' %}">
            {{ form|bootstrap }}
            <input type="submit" class="btn btn-primary" value="Filter">
        </form>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <h2 class="mb-2 mt-4">Team Timesheets</h2>
        {% for total in totals %}
            <h3 class="mb-1">{{ total.user.first_name }} {{ total.user.last_name }}</h3>
            <table class="table">
                <thead class="thead-default">
                  <tr>
                      <th>Date</th>
                      <th>Related to object</th>
                      <th>Log type</th>
                      <th>Comments</th>
                      <th>Duration</th>
                  </tr>
                </thead>
                <tbody>
                    {% for log in total.logs %}
                        <tr>
                            <td>{{ log.work_date }}</td>
                            <td>{{ log.content }}</td>
                            <td>{{ log.log_type }}</td>
                            <td>{{ log.comments }}</td>
                            <td>{{ log.duration|duration }}</td>
                        </tr>
                    {% endfor %}
                    <tr>
                        <td colspan="4"></td>
                        <td><strong>{{ total.duration.total }}</strong></td>
                    </tr>
                </tbody>
            </table>
        {% empty %}
            <h3>Timesheet is empty for this month.</h3>
        {% endfor %}
    </div>
</div>
{% endblock %}
